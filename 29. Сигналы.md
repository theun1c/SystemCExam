# 29 Билет
## Теория

**Сигналы. Особенности создания и использования сигналов + виды сигналов**

Что такое сигнал?

Сигнал — это короткое системное уведомление от ОС процессу о важном событии. Это как если ОС постучалась в дверь программы: «Эй, пора завершаться» «Эй, пользователь нажал Ctrl+C» «Эй, ты полез в плохую память — прекращай!»

Живые примеры:

Пример 1. Выключение Windows, а файл не сохранён

Когда ты жмёшь _Завершение работы_, ОС посылает приложениям сигнал «готовься к завершению». Например, Word получает уведомление: → «Система завершается, сохраните данные!» И Word показывает окно: «Сохранить изменения? ✓ Да ✓ Нет ✓ Отмена завершения работы» Это и есть обработка сигнала перед завершением.

Пример 2. Linux: нажали Ctrl+C Ctrl+C → сигнал SIGINT.

Программа может не упасть, а, например: — аккуратно остановить расчёты, — сохранить промежуточный результат, — вывести сообщение: «Работа остановлена пользователем».

Виды сигналов:

- Управляющие:

1. SIGINT – Прерывание Ctrl+C
2. SIGTERM - Корректное завершение kill PID
3. SIGKILL - Мгновенное убийство kill -9 PID (не перехватывается!)
4. SIGHUP - Потеря связи / перезагрузка Терминал закрылся; перезапуск конфигурации демона

- Ошибки:
1. SIGSEGV Ошибка сегментации неправильный указатель
2. SIGFPE Ошибка арифметики деление на 0
3. SIGILL Неверная инструкция повреждённый код

- Для процессов:
1. SIGCHLD Дочерний процесс завершился родитель узнаёт, что можно читать статус
2. SIGSTOP Остановить процесс как пауза
3. SIGCONT Продолжить снять паузу

Как программа ловит сигнал:

Простой пример:

``` C
#include <signal.h>
#include <stdio.h>

void handler(int sig) {
	printf("Получен сигнал: %d\n", sig);
}
int main() {

	signal(SIGINT, handler); // перехват Ctrl+C

	while(1); // бесконечная работа

	}
}
```

Теперь Ctrl+C не убьёт программу — она просто выведет сообщение.