# 14 Билет
## Теория

**Системный буфер обмена. Особенности взаимодействия программного обеспечения с системным буфером обмена**

Буфер обмена — это временная область памяти, предназначенная для передачи данных между приложениями. Он позволяет копировать и вставлять информацию, такую как текст, изображения, файлы и другие типы данных, между разными программами. По сути буфер обмена можно рассматривать как канал или глобальный указатель, к которому имеют доступ все прикладные программы.

Однако при работе с буфером следует учитывать и его недостатки:

1. Буфер обмена только один в системе. и любое приложение может его перезаписать. Поэтому нет гарантии целостности получения данных
2. Информация не может быть приватной (Во сколько буфер обмена доступен всем)

Буфер обмена на позволяет хранить данные различных типов. Однако при работе с ним программы учитывают этот контекст.

В зависимости от формата данных в буфере с ним могут взаимодействовать те или иные приложения.

Пример:
1. Ctrl+C копирует текст → программа кладёт его в буфер.
2. Ctrl+V → другая программа забирает.

## Практика
Запись и считывание строковых параметров в системный реестр.

Шаг 1. необходимо написать данный код внутри main.c файла и запустить его.

``` C
#include <Windows.h>
#include <stdio.h>

int main() {
	system("chcp 1251");

	HKEY hKey;
	if (RegOpenKeyA(HKEY_CURRENT_USER, 0, &hKey) == 0) {
		char* str = "Hello";
		if (RegSetValueExA(hKey, 0, 0, REG_SZ, str, sizeof(str)) == 0) {
			DWORD type;
			PVOID data[200];
			DWORD len = 200;
			if (RegGetValueA(hKey, 0, 0, RRF_RT_REG_SZ, &type, &data, &len) == 0) {
				printf("%s", data);
			}
		}
	}
}
```