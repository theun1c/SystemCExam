# 27 Билет
## Теория

**Создание процессов Windows**

В Windows создание нового процесса осуществляется с помощью функции CreateProcess. Эта функция позволяет запускать программы, настраивать параметры их выполнения и контролировать их жизнь.

Общая схема создания процесса:

1. Подготовка структуры STARTUPINFO:Структура, которая содержит информацию о начальной среде процесса (например, размер окна, видимость, стандартный ввод-вывод).
2. Подготовка структуры PROCESS_INFORMATION:Структура, в которой будут возвращены дескрипторы и идентификаторы нового процесса.
3. Настройка параметров запуска: Например, можно настроить рабочие каталоги, приоритеты, наследование дескрипторов и многое другое.
4. Создание процесса: Вызов функции CreateProcess, которая создаст новый процесс и вернёт информацию о нём.

Основные шаги работы с процессом:
1. Создание процесса:CreateProcess(...) — создаёт новый процесс.
2. Ожидание завершения:WaitForSingleObject(...) — дожидается завершения процесса.
3. Завершение процесса:TerminateProcess(...) — принудительное завершение процесса.
4. Освобождение ресурсов:CloseHandle(...) — закрывает дескрипторы процесса и потока.

![d](assets/Pasted%20image%2020251226082705.png)

## Практика 

Создание консольной утилиты, которая печатает список переданных ей аргументов из командной строки. При демонстрации работы программы рассмотреть не менее трех способов передачи аргументов в запускаемый процесс

Для Windows
1. Написать следующий код и запустить через консоль "x64/Debug  start name.exe hello"

``` C
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

int main(int args, char* argv[]) {
    for (size_t i = 0; argv[i] != 0; i++)
    {
        printf("%s\n", argv[i]);
    }
    int f = 0;
    scanf_s("%d", &f);
}

```

2. Вариант перейти в свойства проекта и в отладке изменить аргументы командной строки 

![вфывфыв](assets/image.png)

Для линукса: 
1. следующий код написать 
``` C
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <unistd.h>

int main(int args, char* argv[]) {
    char* buffer[] = {"ЭТО ", "ужас", NULL};
	execve("./main1", buffer, 0);
}
```

2. следующий код с запуском ./main arg1 arg2
``` C
#include <stdio.h>

int main(int args, char* argv[]) {
	printf("%s ", argv[0]);
	printf("%s ", argv[1]);
	printf("%s ", argv[2]);
}
```

3. через ярлык (создаем ярлык - показывать в терминале - переместить в папку - изменить команду на ./main аргумент1 арг2