# 10 Билет
## Теория
**Предназначение и особенности использования директив препроцессора и заголовочных файлов.**

Препроцессор — это инструмент, который обрабатывает исходный код перед этапом компиляции. Его задача — подготовить исходники, выполнив предварительные преобразования, подставляя нужные значения и удаляя ненужные куски кода.

Дерективы - команды, выполняемые до компиляции.

Какие задачи решает препроцессор:
1. включение файлов (include)
2. замена текста (define)
3. условная компиляция (ifdef, ifndef)

Примеры:
1. include

![Photo](assets/Pasted%20image%2020251226021740.png)

2. define

![Photo](assets/Pasted%20image%2020251226021925.png)

3. ifdef

![Photo](assets/Pasted%20image%2020251226022017.png)
## Практика
Программа для записи и считывание строки с использованием системного буфера.

Шаг 1. Написать в main.c следующий код.

``` C

#define _CRT_SECURE_NO_WANINGS
#include <stdio.h>
#include <Windows.h>

void Set(LPWSTR str) {
	int len = wcslen(str + 1) * sizeof(LPWSTR); // выделяем память под длину строки
	HANDLE h = GlobalAlloc(0, len); // Выделяем память в глобальной куче (GMEM_FIXED = 0)
	memcpy(GlobalLock(h), str, len); // Блокируем память для получения указателя и копируем строку
	GlobalUnlock(h); // Разблокируем память
	OpenClipboard(0); // Открываем буфер обмена для текущего потока (0 = NULL) 
	EmptyClipboard();  // Очищаем текущее содержимое буфера обмена
	SetClipboardData(CF_UNICODETEXT, h); // Устанавливаем данные в буфер обмена в формате Unicode текста
	CloseClipboard(); // Закрываем буфер обмена
}

int Get() {
	OpenClipboard(0); // Открываем буфер обмена
	MessageBox(0, GetClipboardData(CF_UNICODETEXT), L"title", 0); // выводим в messagebox
	CloseClipboard(); // Закрываем буфер обмена
}

int main() {
	Set(L"GG"); // устанавливаем значение 
	Get(); // получаем значение
}

```