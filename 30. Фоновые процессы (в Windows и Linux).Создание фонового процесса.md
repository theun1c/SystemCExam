# 30 Билет
## Теория

**Фоновые процессы (в Windows** **и Linux****). Актуальность их создания и использования**

**Фоновые процессы** - это компьютерные процессы, которые выполняются в фоновом режиме и без вмешательства пользователя. Такие процессы не имеют пользовательского интерфейса и, как правило, не отправляют выходные данные на родительский терминал.

Фоновые процессы в Windows (службы)

В Windows фоновые процессы называются службами (Services). Это программы, которые запускаются автоматически при загрузке системы и выполняют задачи без вмешательства пользователя.

Примеры:
1. Служба печати: управление печатью документов.
2. Служба обновления Windows: скачивание и установка обновлений.
3. Служба защиты от вирусов: антивирусная защита.

Фоновые процессы в Linux (демоны)

В Linux фоновые процессы называются демонами (Daemons). Они запускаются при старте системы и работают в фоновом режиме, обеспечивая постоянную функциональность.

Примеры:
1. sshd: демон SSH, обеспечивающий удалённый доступ к системе.
2. httpd: веб-сервер Apache.
3. cron: планировщик задач, запускающий задачи по расписанию.

Актуальность фоновых процессов:
1. Автономность: Выполнение задач без постоянного присутствия пользователя. Например, автоматическое резервное копирование данных.
2. Надёжность: Постоянная работа в фоновом режиме обеспечивает бесперебойность и надёжность выполнения критических задач.
3. Снижение нагрузки на пользователя: Позволяет разгрузить пользователя от постоянной необходимости запускать программы вручную.
4. Безопасность: Обеспечивают безопасность системы, например, антивирусные службы, мониторящие активность.
5. Производительность: Оптимизация работы системы за счёт распределения задач между фоновыми процессами и интерактивными приложениями.

## Практика 

Создание фонового процесса, который каждые 5 секунд выводит всплывающее или диалоговое сообщение, содержащее увеличивающееся на единицу значение счетчика (отдельно для Windows и Linux)

Для винды 
``` C

#include <Windows.h>
#include <stdio.h>
#include <string.h>

int c = 0;

DWORD message() {
	c++;
	wchar_t str[100];
	swprintf(str, 100, L"c = %d", c);
	MessageBoxW(0, str, L"заголовок", 0);
}

int WINAPI WinMain() {
	system("chcp 1251>nul");
	while (1) {
		if (c != 5) {
			HANDLE thread = CreateThread(0, 0, message, 0, 0, 0);
			Sleep(5000);
			TerminateThread(thread, 0);
		}
	}
}

```

Для линукса
``` C
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

void message() {
    int c = 0;
    char str[100];
    while(1) {
        sprintf(str, "notify-send \"count messages = %d\"", ++c);
        system(str);
        sleep(12);
    }
}

int main() {
    daemon(0,0);
    message();
}
```