# 4 Билет
## Теория 
**Многопоточный режим работы компьютера. преимущества использования многопоточности**

Многопоточное исполнение — это способность операционной системы и центрального процессора выполнять несколько потоков инструкций одновременно. Каждый поток выполняется независимо друг от друга, что существенно повышает эффективность и быстродействие программ.

Суть: Процесс запускает несколько потоков, выполняющихся параллельно. Операционная система распределяет вычислительные мощности между этими потоками таким образом, чтобы максимизировать использование аппаратных ресурсов.

Преимущества многопоточности:

1.       Ускорение работы. Параллельное выполнение задач сокращает общее время выполнения программы.

2.       Более отзывчивый интерфейс. Пользовательские интерфейсы остаются активными и реагируют мгновенно, даже если фоновые процессы нагружены.

3.       Лучшая нагрузка на процессор. Современные процессоры имеют несколько ядер и поддерживают технологию Hyper-Threading, что позволяет эффективно распараллеливать задачи.

4.       Разделение нагрузки. Нагрузку можно равномерно распределить между ядрами процессора, увеличивая общую пропускную способность.

5.       Масштабирование. При увеличении числа ядер процессора многопоточность позволяет масштабировать производительность практически линейно.

Живой пример:
Интернет-браузер: Один поток отвечает за интерфейс (UI), другой — за рендеринг страниц, третий — за обработку скриптов (JavaScript). Благодаря такому распределению браузер остается быстрым и отзывчивым даже при сложной нагрузке.

Видеоигры: Графический движок работает в одном потоке, звуковые эффекты и физика — в другом. Это обеспечивает плавность игры и высокую частоту кадров.

## Практика
Программа для считывания и записи строкового значения из текстового файла с последующей записью его в другой текстовый файл. Для работы с файлами используются функции WinAPI.

Шаг 1. Напишем следующий файл main.c консольного проекта. (Используем функции WINAP)

``` C
#include <Windows.h>
#include <stdio.h>
#include <stdlib.h>
#include <malloc.h>

// функция для чтения из файла
char* readFile(HANDLE hFile) {
	DWORD count = 0; 
	char* buffer = calloc(100, sizeof(char));
	int read = ReadFile(hFile, buffer, 100, &count, 0);

	buffer = realloc(buffer, count * sizeof(char));
	buffer[count] = '\0';
	return buffer;
}

// функция для записи в файл 
int writeFile(char* buffer) {
	HANDLE hFile = CreateFileA("answer.txt", GENERIC_WRITE, 0, 0, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, 0);
	int isWrite = WriteFile(hFile, buffer, strlen(buffer), 0, 0);

	if (isWrite == 0) return 1; // ошибка записи
	else return 0;
}

// точка входа
int main() {
	system("chcp 1251");
	if (GetFileAttributesA("file.txt") == INVALID_FILE_ATTRIBUTES) {
		printf("Файла не существует\n");
		return 0;
	}

	HANDLE hFile = CreateFileA("file.txt", GENERIC_READ, 0, 0, OPEN_ALWAYS, FILE_ATTRIBUTE_NORMAL, 0);

	char* buffer = readFile(hFile);
	if (buffer == NULL) {
		printf("Файл пустой или ошибка чтения\n");
		return 0;
	}

	printf("%s\n", buffer);
	writeFile(buffer);
	return 0;
}
```

Шаг 2. Создадим тестовый файл с названием file.txt в проекте, рядом с файлом main.c и напишем в него что-то. 

![Photo](assets/Pasted%20image%2020251226002205.png)

Шаг 3. После запуска в этой же папке появится файл answer.txt с текстом "hello"

