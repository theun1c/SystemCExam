# 3 Билет
## Теория 
**Статические и динамические библиотеки. Область применения и особенности использования**

Библиотеки играют ключевую роль в современных программах, позволяя повторно использовать готовые фрагменты кода и оптимизировать разработку программного обеспечения. Существуют два основных вида библиотек: статические и динамические.

 Статические библиотеки:

 1.       Что это: Файлы с заранее собранным машинным кодом, включаемые прямо в исполняемый файл программы при компиляции.

 2.       Где удобно применять: Небольшие программы, служебные утилиты, закрытые проекты.

 3.       Основные плюсы:

	 a.       Простота распространения (один бинарный файл).

	 b.       Повышенная надежность и безопасность (нет риска конфликтов версий).

	 c.        Быстрая загрузка программы (код готов к выполнению).

 4.       Минус: Увеличенный размер исполнимого файла.

 Динамические библиотеки:

 1.       Что это: Отдельные модули, загружающиеся в процессе выполнения программы (при запуске или по требованию).

 2.       Где удобно применять: Большие коммерческие продукты, настольное ПО, веб-серверы.

 3.       Основные плюсы:

	 a.       Энергоэффективность (общая библиотека используется всеми клиентами).

	 b.       Легкость обновления (обновляется одна библиотека, а не целая программа).

	 c.        Компактность приложения (размер минимален, поскольку сам код находится отдельно).

 4.       Минусы:

	 a.       Риск конфликтов версий.

	 b.       Медленнее первый запуск (нужно загрузить библиотеку).

  Какой выбрать?

1.       Статику используй, если проект маленький, закрыт и важна надежность.

2.       Динамику выбирай, если хочешь сэкономить пространство, облегчить поддержку и ускорять развитие крупных проектов.

## Практика 
Создание динамической библиотеки в Linux. Для демонстрации работы написать две элементарные функции в библиотеке и вызвать их из основной программы.

Шаг 1. Для начала создайте любой файл .С с 2-мя простыми функциями. Но перед каждой функцией нужно поставить метку о том, что эта функция будет внешней (extern).
``` C
#include <stdio.h>
#include <stdlib.h>

extern int Sum(int a, int b){
	return a + b;
}

extern int Diff(int a, int b){
	return a - b;
}
```

Шаг 2. Скомпилируем нашу динамическую библиотеку. 

``` 
gcc -fPIC functionc.c -shared -o DLL.so
```

Шаг 3. Напишем файл main.c со следующим кодом.

``` C
#include <dlfcn.h>
#include <stdlib.h>
#include <stdio.h>

typedef int(*dllArithm)(int, int);

int main(){
	void* handle = dlopen("./DLL.so", RTLD_LAZY); // загрузка длл
	
	dllArithm Sum = dpsym(handle, "Sum");
	dllArithm Diff = dpsym(handle, "Diff");

	printf("%d\n", Sum(2,2));
	printf("%d\n", Diff(2,2));
	
	dlclose(handle) // закрываем библиотеку "очищаем"
}

```

Шаг 4. Скомпилируем и запустим main файл.

``` 
gcc main.c -ldl
./a.out
```